<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ImaginaryCTF 2024 | bigbluewhale111&#39;s blog</title>
<meta name="keywords" content="">
<meta name="description" content="Writeup for some web challenge for ImaginaryCTF 2024">
<meta name="author" content="">
<link rel="canonical" href="https://blog.bigbluewhale111.me/writeups/imaginaryctf2024/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fd5566c526ae48aadabd950798a2dc3568536401560eae5caac3765a42a9e7b5.css" integrity="sha256-/VVmxSauSKravZUHmKLcNWhTZAFWDq5cqsN2WkKp57U=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.bigbluewhale111.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.bigbluewhale111.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.bigbluewhale111.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.bigbluewhale111.me/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.bigbluewhale111.me/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://blog.bigbluewhale111.me/writeups/imaginaryctf2024/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="https://blog.bigbluewhale111.me/writeups/imaginaryctf2024/">
  <meta property="og:site_name" content="bigbluewhale111&#39;s blog">
  <meta property="og:title" content="ImaginaryCTF 2024">
  <meta property="og:description" content="Writeup for some web challenge for ImaginaryCTF 2024">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="writeups">
    <meta property="article:published_time" content="2025-02-05T15:16:21+07:00">
    <meta property="article:modified_time" content="2025-02-05T15:16:21+07:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ImaginaryCTF 2024">
<meta name="twitter:description" content="Writeup for some web challenge for ImaginaryCTF 2024">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "ImaginaryCTF 2024",
      "item": "https://blog.bigbluewhale111.me/writeups/imaginaryctf2024/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ImaginaryCTF 2024",
  "name": "ImaginaryCTF 2024",
  "description": "Writeup for some web challenge for ImaginaryCTF 2024",
  "keywords": [
    
  ],
  "articleBody": "TL;DR This is a writeup for some web challenge for ImaginaryCTF 2024\nReadme Well, simply read the Dockerfile and got the flag. That was the unintended way, the authentic way was bypass the $request_filename. So if we make request GET /flag.txt directly, nginx will recognize the $request_filename. So if we make request GET /flag.txt/., then nginx will treat this as a path and NodeJS will resolve the file and we will get the flag.\nJournal As the description said: “there is no LFI in the app”. So how can we read the flag? There is a way to RCE in PHP if assert not handled carefully.\nassert(\"strpos('$file', '..') === false\") or die(\"Invalid file!\"); In this case, a GET /?file=a%27,die(`cat+/flag*`)); would give us the flag.\nP2C I was too lazy to think of any other ways to solve this challenge. I just used generated Python reverse shell.\nCrystals This was a fun one, while I was really confused about the challenge source, I just tested a payload GET/`ls` and got the flag.\nThe Amazing Race At first glance, I guessed this challenge would be a race condition one. The challenge check whether we can move if the wall is not next to the Player. So if we spam many request, we would be able to reach the goal. Let’s explain this idea. So if the first and second request were sent to the server at roughly same time, first request passed the movement check, but hadn’t moved yet, so the second request would pass the check also. So we can move through wall. I used Burpsuit Turbo Intruder to solve this.\nReadme2 Well this is a guessy one. While trying stupid payload I tried GET /\\\\0 and the debugging show that it tried resolving 0.0.0.0, then I tried GET //0 and get the same thing. So why? As I test out the URL('http://a.test/hehe', 'http://b.test'), this would not return http://b.test/http://a.test/hehe or anything like b.test host. It returned the host of the first parameter. So when I tried GET //0 the new URL(url.pathname + url.search, 'http://localhost:3000/') would return http://0.0.0.0 (because Javascript treat //something as http://something ). So this was a SSRF. I made an endpoint to redirect to http://localhost:3000/flag.txt and made request to my endpoint and get the flag. This was unintended though, the intended one was exploiting the fact that “Bun will put the value of Host header into req.url, which allows us to do many funny things to bypass the check.” - Original Writeup.\nPwning en Logique I think this chall was some sort of SSTI. After reading the document carefully, I saw that ~@ would execute the next argument and the output will be placed there. The downside is the next argument here was passed in as a string, which luckily can be treated as a predicate with no parameter. Inside the chall setup, there was print_flag predicate requiring no argument and gave us the flag. https://pwning-en-logique-fa381af47302e838.d.imaginaryctf.org:443/greet?format=~@~n~w\u0026greeting=print_flag would give us the flag.\nNotactf I think this would be a crypto-ish chall. We need to be a admin to solve this. And the web app check us by verify the user-auth-token. And by tamper this token, we will be admin :smiley:. Because I was too lazy, so I though of tampering 1 character only. but really, any would work. The check only verify the decoded token without checking with the md5 hash. So I reversed the process of generating the token and tampered it.\nfrom AesEverywhere import aes256 from xorCryptPy import xorCrypt import hashlib authtoken = \"f3a5839ef3a582b9f3a5838df3a583b8f3a583aff3a5838cf3a5839df3a583a0f3a58393f3a582baf3a582a0f3a583aaf3a58399f3a5839cf3a58382f3a58383f3a58386f3a583a2f3a583bbf3a583aff3a583a4f3a5839df3a58382f3a583a0f3a582a0f3a583a0f3a5839df3a5839cf3a583acf3a58389f3a582bdf3a5838cf3a582bbf3a583a8f3a583a0f3a582bbf3a583a4f3a582bef3a5839bf3a58392f3a58382f3a58398f3a582a4f3a583bbf3a583b2f3a583b8f3a58399f3a583a2f3a58399f3a58399f3a582bef3a583b8f3a582bef3a582bdf3a58388f3a583bbf3a583a4f3a58383f3a583bbf3a583a0f3a5838ff3a582b2f3a58384f3a582bdf3a582b8f3a58380f3a583a2f3a58386f3a5838cf3a5838ff3a58386f3a5838ff3a583a2f3a5838ef3a583baf3a5839cf3a5839df3a583a2f3a583bdf3a583bcf3a58383f3a58393f3a583b8f3a582bbf3a582b2f3a583bcf3a582b6f3a582b6\" from base64 import decodebytes, encodebytes auth_decode = bytes.fromhex(authtoken).decode(\"utf-8\") auth_decode = xorCrypt(auth_decode, 938123) print(auth_decode) auth_decode = decodebytes(auth_decode.encode()) # print(auth_decode) gay = auth_decode[:16] auth_decode = auth_decode[16:] # print(auth_decode) auth_decode = gay + auth_decode[:16] + (auth_decode[16]^ord('z')^ord('a')).to_bytes(1,'big') + auth_decode[17:] # print(auth_decode) auth_decode = encodebytes(auth_decode).decode(\"utf-8\") print(auth_decode) auth_decode = xorCrypt(auth_decode, 938123) auth_decode = str(auth_decode) auth_decode = auth_decode.encode(\"utf-8\").hex() print(auth_decode) A bit manual but well, it solved the challenge right :+1:.\n",
  "wordCount" : "649",
  "inLanguage": "en",
  "datePublished": "2025-02-05T15:16:21+07:00",
  "dateModified": "2025-02-05T15:16:21+07:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blog.bigbluewhale111.me/writeups/imaginaryctf2024/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "bigbluewhale111's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://blog.bigbluewhale111.me/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.bigbluewhale111.me/" accesskey="h" title="bigbluewhale111&#39;s blog (Alt + H)">bigbluewhale111&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.bigbluewhale111.me/blogs/" title="Blogs">
                    <span>Blogs</span>
                </a>
            </li>
            <li>
                <a href="https://blog.bigbluewhale111.me/writeups/" title="Writeups">
                    <span>Writeups</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://blog.bigbluewhale111.me/">Home</a></div>
    <h1 class="post-title entry-hint-parent">
      ImaginaryCTF 2024
    </h1>
    <div class="post-description">
      Writeup for some web challenge for ImaginaryCTF 2024
    </div>
    <div class="post-meta"><span title='2025-02-05 15:16:21 +0700 +07'>February 5, 2025</span>&nbsp;·&nbsp;<span>4 min</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#tldr" aria-label="TL;DR">TL;DR</a></li>
                <li>
                    <a href="#readme" aria-label="Readme">Readme</a></li>
                <li>
                    <a href="#journal" aria-label="Journal">Journal</a></li>
                <li>
                    <a href="#p2c" aria-label="P2C">P2C</a></li>
                <li>
                    <a href="#crystals" aria-label="Crystals">Crystals</a></li>
                <li>
                    <a href="#the-amazing-race" aria-label="The Amazing Race">The Amazing Race</a></li>
                <li>
                    <a href="#readme2" aria-label="Readme2">Readme2</a></li>
                <li>
                    <a href="#pwning-en-logique" aria-label="Pwning en Logique">Pwning en Logique</a></li>
                <li>
                    <a href="#notactf" aria-label="Notactf">Notactf</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="tldr">TL;DR<a hidden class="anchor" aria-hidden="true" href="#tldr">#</a></h2>
<p>This is a writeup for some web challenge for ImaginaryCTF 2024</p>
<h2 id="readme">Readme<a hidden class="anchor" aria-hidden="true" href="#readme">#</a></h2>
<p>Well, simply read the Dockerfile and got the flag.
That was the unintended way, the authentic way was bypass the $request_filename. So if we make request GET /flag.txt directly, nginx will recognize the $request_filename. So if we make request GET /flag.txt/., then nginx will treat this as a path and NodeJS will resolve the file and we will get the flag.</p>
<h2 id="journal">Journal<a hidden class="anchor" aria-hidden="true" href="#journal">#</a></h2>
<p>As the description said: &ldquo;there is no LFI in the app&rdquo;. So how can we read the flag? There is a way to RCE in PHP if assert not handled carefully.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">assert</span>(<span style="color:#e6db74">&#34;strpos(&#39;</span><span style="color:#e6db74">$file</span><span style="color:#e6db74">&#39;, &#39;..&#39;) === false&#34;</span>) <span style="color:#66d9ef">or</span> <span style="color:#66d9ef">die</span>(<span style="color:#e6db74">&#34;Invalid file!&#34;</span>);
</span></span></code></pre></div><p>In this case, a <code>GET /?file=a%27,die(`cat+/flag*`));</code> would give us the flag.</p>
<h2 id="p2c">P2C<a hidden class="anchor" aria-hidden="true" href="#p2c">#</a></h2>
<p>I was too lazy to think of any other ways to solve this challenge. I just used generated Python reverse shell.</p>
<h2 id="crystals">Crystals<a hidden class="anchor" aria-hidden="true" href="#crystals">#</a></h2>
<p>This was a fun one, while I was really confused about the challenge source, I just tested a payload <code>GET/`ls` </code> and got the flag.</p>
<h2 id="the-amazing-race">The Amazing Race<a hidden class="anchor" aria-hidden="true" href="#the-amazing-race">#</a></h2>
<p>At first glance, I guessed this challenge would be a race condition one. The challenge check whether we can move if the wall is not next to the Player. So if we spam many request, we would be able to reach the goal. Let&rsquo;s explain this idea. So if the first and second request were sent to the server at roughly same time, first request passed the movement check, but hadn&rsquo;t moved yet, so the second request would pass the check also. So we can move through wall. I used Burpsuit Turbo Intruder to solve this.</p>
<h2 id="readme2">Readme2<a hidden class="anchor" aria-hidden="true" href="#readme2">#</a></h2>
<p>Well this is a guessy one. While trying stupid payload I tried <code>GET /\\0</code> and the debugging show that it tried resolving 0.0.0.0, then I tried <code>GET //0</code> and get the same thing. So why? As I test out the <code>URL('http://a.test/hehe', 'http://b.test')</code>, this would not return <code>http://b.test/http://a.test/hehe</code> or anything like b.test host. It returned the host of the first parameter. So when I tried <code>GET //0</code> the new <code>URL(url.pathname + url.search, 'http://localhost:3000/')</code> would return <code>http://0.0.0.0</code> (because Javascript treat <code>//something</code> as <code>http://something</code> ). So this was a SSRF. I made an endpoint to redirect to <code>http://localhost:3000/flag.txt</code> and made request to my endpoint and get the flag.
This was unintended though, the intended one was exploiting the fact that &ldquo;Bun will put the value of <code>Host</code> header into <code>req.url</code>, which allows us to do many funny things to bypass the check.&rdquo; - <a href="https://github.com/ImaginaryCTF/ImaginaryCTF-2024-Challenges-Public/blob/main/Web/readme2/README.md">Original Writeup</a>.</p>
<h2 id="pwning-en-logique">Pwning en Logique<a hidden class="anchor" aria-hidden="true" href="#pwning-en-logique">#</a></h2>
<p>I think this chall was some sort of SSTI. After reading the document carefully, I saw that <code>~@</code> would execute the next argument and the output will be placed there. The downside is the next argument here was passed in as a string, which luckily can be treated as a predicate with no parameter. Inside the chall setup, there was <code>print_flag</code> predicate requiring no argument and gave us the flag.
<code>https://pwning-en-logique-fa381af47302e838.d.imaginaryctf.org:443/greet?format=~@~n~w&amp;greeting=print_flag</code> would give us the flag.</p>
<h2 id="notactf">Notactf<a hidden class="anchor" aria-hidden="true" href="#notactf">#</a></h2>
<p>I think this would be a crypto-ish chall. We need to be a admin to solve this. And the web app check us by verify the <code>user-auth-token</code>. And by tamper this token, we will be admin :smiley:.
Because I was too lazy, so I though of tampering 1 character only. but really, any would work. The check only verify the decoded token without checking with the md5 hash. So I reversed the process of generating the token and tampered it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> AesEverywhere <span style="color:#f92672">import</span> aes256
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> xorCryptPy <span style="color:#f92672">import</span> xorCrypt
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> hashlib
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>authtoken <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;f3a5839ef3a582b9f3a5838df3a583b8f3a583aff3a5838cf3a5839df3a583a0f3a58393f3a582baf3a582a0f3a583aaf3a58399f3a5839cf3a58382f3a58383f3a58386f3a583a2f3a583bbf3a583aff3a583a4f3a5839df3a58382f3a583a0f3a582a0f3a583a0f3a5839df3a5839cf3a583acf3a58389f3a582bdf3a5838cf3a582bbf3a583a8f3a583a0f3a582bbf3a583a4f3a582bef3a5839bf3a58392f3a58382f3a58398f3a582a4f3a583bbf3a583b2f3a583b8f3a58399f3a583a2f3a58399f3a58399f3a582bef3a583b8f3a582bef3a582bdf3a58388f3a583bbf3a583a4f3a58383f3a583bbf3a583a0f3a5838ff3a582b2f3a58384f3a582bdf3a582b8f3a58380f3a583a2f3a58386f3a5838cf3a5838ff3a58386f3a5838ff3a583a2f3a5838ef3a583baf3a5839cf3a5839df3a583a2f3a583bdf3a583bcf3a58383f3a58393f3a583b8f3a582bbf3a582b2f3a583bcf3a582b6f3a582b6&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> base64 <span style="color:#f92672">import</span> decodebytes, encodebytes
</span></span><span style="display:flex;"><span>auth_decode <span style="color:#f92672">=</span> bytes<span style="color:#f92672">.</span>fromhex(authtoken)<span style="color:#f92672">.</span>decode(<span style="color:#e6db74">&#34;utf-8&#34;</span>)
</span></span><span style="display:flex;"><span>auth_decode <span style="color:#f92672">=</span> xorCrypt(auth_decode, <span style="color:#ae81ff">938123</span>)
</span></span><span style="display:flex;"><span>print(auth_decode)
</span></span><span style="display:flex;"><span>auth_decode <span style="color:#f92672">=</span> decodebytes(auth_decode<span style="color:#f92672">.</span>encode())
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(auth_decode)</span>
</span></span><span style="display:flex;"><span>gay <span style="color:#f92672">=</span> auth_decode[:<span style="color:#ae81ff">16</span>]
</span></span><span style="display:flex;"><span>auth_decode <span style="color:#f92672">=</span> auth_decode[<span style="color:#ae81ff">16</span>:]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(auth_decode)</span>
</span></span><span style="display:flex;"><span>auth_decode <span style="color:#f92672">=</span> gay <span style="color:#f92672">+</span> auth_decode[:<span style="color:#ae81ff">16</span>] <span style="color:#f92672">+</span> (auth_decode[<span style="color:#ae81ff">16</span>]<span style="color:#f92672">^</span>ord(<span style="color:#e6db74">&#39;z&#39;</span>)<span style="color:#f92672">^</span>ord(<span style="color:#e6db74">&#39;a&#39;</span>))<span style="color:#f92672">.</span>to_bytes(<span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#39;big&#39;</span>) <span style="color:#f92672">+</span> auth_decode[<span style="color:#ae81ff">17</span>:]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(auth_decode)</span>
</span></span><span style="display:flex;"><span>auth_decode <span style="color:#f92672">=</span> encodebytes(auth_decode)<span style="color:#f92672">.</span>decode(<span style="color:#e6db74">&#34;utf-8&#34;</span>)
</span></span><span style="display:flex;"><span>print(auth_decode)
</span></span><span style="display:flex;"><span>auth_decode <span style="color:#f92672">=</span> xorCrypt(auth_decode, <span style="color:#ae81ff">938123</span>)
</span></span><span style="display:flex;"><span>auth_decode <span style="color:#f92672">=</span> str(auth_decode)
</span></span><span style="display:flex;"><span>auth_decode <span style="color:#f92672">=</span> auth_decode<span style="color:#f92672">.</span>encode(<span style="color:#e6db74">&#34;utf-8&#34;</span>)<span style="color:#f92672">.</span>hex()
</span></span><span style="display:flex;"><span>print(auth_decode)
</span></span></code></pre></div><p>A bit manual but well, it solved the challenge right :+1:.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://blog.bigbluewhale111.me/">bigbluewhale111&#39;s blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
